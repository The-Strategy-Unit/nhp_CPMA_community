```{r}
#| output: asis
#| eval: !expr include_admissions_and_beddays
cat("::: panel-tabset")
cat("\n")
cat("##### Admissions")
```

```{r, fig.width=10, fig.height=6}
#| eval: !expr include_admissions
#| label: upset_plot_frail_elderly_high_episodes
#| fig-cap: !expr get_caption_upset_plots(cohort_title, "admissions")
if(cohort %in% mechanisms) {
  plot_upset_plot_mechanism_group(overlap_numbers, 
                                  mitigator_summary_table, 
                                  episodes)
} else {
  plot_upset_plot(overlap_numbers,  
                  mitigator_summary_table,
                  episodes)
}
```

```{r}
#| output: asis
#| eval: !expr include_admissions_and_beddays
cat("##### Beddays")
```

```{r, fig.width=10, fig.height=6}
#| eval: !expr include_beddays
#| label: upset_plot_frail_elderly_high_bedday
#| fig-cap: !expr get_caption_upset_plots(cohort_title, "beddays")
if(cohort %in% mechanisms) {
  plot_upset_plot_mechanism_group(overlap_numbers, 
                                  mitigator_summary_table, 
                                  beddays)
} else {
  plot_upset_plot(overlap_numbers,  
                  mitigator_summary_table,
                  beddays)
}
```

```{r}
#| output: asis
#| eval: !expr include_admissions_and_beddays
cat(":::")
```