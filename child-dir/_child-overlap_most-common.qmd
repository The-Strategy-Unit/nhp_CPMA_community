
Often overlap between a small number of groups can be visualised using Venn diagram. However, due to the large number of mitigator cohorts and therefore high numbers of potential combinations of overlaps we have used upset plots to show the largest overlaps between cohorts.

The 15 most common cohort combinations for the `r cohort_title`  cohort are shown. For this cohort there are a very large number of different cohort combinations, so there are many smaller size cohort combinations that are not shown (all combinations together would add to 100%).

```{r}
#| output: asis
#| eval: !expr include_admissions_and_beddays
cat("::: panel-tabset")
cat("\n")
cat("##### Admissions")
```

```{r, fig.width=10, fig.height=6}
#| eval: !expr include_admissions
#| label: upset_plot_frail_elderly_high_episodes
#| fig-cap: !expr get_caption_upset_plots(cohort_title, "admissions")
if(check_if_mechanism(cohort, mitigator_summary_table)) {
  plot_upset_plot_mechanism_group(overlap_numbers, 
                                  mitigator_summary_table, 
                                  episodes)
} else {
  plot_upset_plot(overlap_numbers,  
                  mitigator_summary_table,
                  episodes)
}
```

```{r}
#| output: asis
#| eval: !expr include_admissions_and_beddays
cat("##### Beddays")
```

```{r, fig.width=10, fig.height=6}
#| eval: !expr include_beddays
#| label: upset_plot_frail_elderly_high_bedday
#| fig-cap: !expr get_caption_upset_plots(cohort_title, "beddays")
if(check_if_mechanism(cohort, mitigator_summary_table)) {
  plot_upset_plot_mechanism_group(overlap_numbers, 
                                  mitigator_summary_table, 
                                  beddays)
} else {
  plot_upset_plot(overlap_numbers,  
                  mitigator_summary_table,
                  beddays)
}
```

```{r}
#| output: asis
#| eval: !expr include_admissions_and_beddays
cat(":::")
```